{
  "$id": "https://github.com/lopidio/enqueuer/subscription/mqtt",
  "type": "object",
  "properties": {
    "type": {
      "const": "mqtt"
    },
    "brokerAddress": {
      "type": "string",
      "title": "Broker Address",
      "default": "",
      "examples": ["mqtt://localhost:1883", "mqtt://lopidio.virgs:1883"]
    },
    "topic": {
      "type": "string",
      "title": "Topic to subscribe",
      "default": "",
      "examples": ["topic/some", "#", "topic/+/other"]
    },
    "options": {
        "type": "object",
        "title": "Options object defined here: https://github.com/mqttjs/MQTT.js#client",
        "properties": {
          "clientId": {
            "type": "string",
            "title": "Client identification",
            "default": "",
            "examples": []
          },
          "wsOptions": {
            "type": "object",
            "title": "For possible options have a look at: https://github.com/websockets/ws/blob/master/doc/ws.md",
            "default": {}
          },
          "keepalive": {
            "type": "number",
            "title": "seconds, set to 0 to disable",
            "default": 60
          },
          "reschedulePings": {
            "type": "boolean",
            "title": "reschedulePings: reschedule ping messages after sending packets (default true)",
            "default": true
          },
          "protocolId": {
            "const": "MQTT"
          },
          "protocolVersion: 4": {
            "type": "number",
            "default": 4
          },
          "clean": {
            "type": "boolean",
            "title": "clean: true, set to false to receive QoS 1 and 2 messages while offline",
            "default": true
          },
          "reconnectPeriod": {
            "type": "number",
            "title": "milliseconds, interval between two reconnections",
            "default": 1000
          },
          "connectTimeout": {
            "type": "number",
            "title": "seconds, time to wait before a CONNACK is received",
            "default": 30
          },
          "username": {
            "type": "string",
            "title": "the username required by your broker, if any"
          },
          "password": {
            "type": "string",
            "title": "the password required by your broker, if any"
          },
          "incomingStore": {
            "type": "object",
            "title": "https://github.com/mqttjs/MQTT.js#mqttstoreoptions"
          },
          "outgoingStore": {
            "type": "object",
            "title": "https://github.com/mqttjs/MQTT.js#mqttstoreoptions"
          },
          "queueQoSZero": {
            "type": "boolean",
            "title": "if connection is broken, queue outgoing QoS zero messages",
            "default": true
          },
          "will": {
            "type": "object",
            "properties": {
              "topic": {
                "type": "string"
              },
              "payload": {
                "type": "string"
              },
              "qos": {
                "type": "number"
              },
              "retain": {
                "type": "boolean"
              }
            }
          },
          "resubscribe": {
            "type": "boolean",
            "title": "if connection is broken and reconnects, subscribed topics are automatically subscribed again",
            "default": true
          }
        }
    }
  },
  "required": [
    "brokerAddress",
    "topic"
  ]
}